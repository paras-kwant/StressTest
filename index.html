<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zone Activity API Monitor</title>
<style>
/* Add your existing CSS here */
</style>
</head>
<body>
<div id="reportsList">Loading reports...</div>
<script>
  function toNepalTime(date){
    const utcTime = date.getTime() + (date.getTimezoneOffset()*60000);
    const nepalOffset = 5.75*60*60000;
    return new Date(utcTime+nepalOffset).toLocaleString('en-US',{
      year:'numeric', month:'2-digit', day:'2-digit',
      hour:'2-digit', minute:'2-digit', second:'2-digit',
      hour12:true
    });
  }
  const now = new Date();
  document.body.insertAdjacentHTML('afterbegin', '<p>Last updated: '+toNepalTime(now)+' NPT</p>');

  fetch('reports.json').then(r=>r.json()).then(reports=>{
    const list=document.getElementById('reportsList');
    if(!reports||reports.length===0){
      list.innerHTML='<p>Reports will appear after first run.</p>';
      return;
    }
    reports.sort((a,b)=>b.timestamp.localeCompare(a.timestamp));
    reports.slice(0,20).forEach((report,index)=>{
      const timestamp=report.timestamp;
      const year=timestamp.substring(0,4);
      const month=timestamp.substring(4,6);
      const day=timestamp.substring(6,8);
      const hour=timestamp.substring(9,11);
      const minute=timestamp.substring(11,13);
      const second=timestamp.substring(13,15);
      const date=new Date(year, month-1, day, hour, minute, second);
      const item=document.createElement('div');
      item.innerHTML='âœ“ Run #'+(index+1)+' - <a href="'+report.path+'/index.html" target="_blank">View Full Report</a> ('+toNepalTime(date)+')';
      list.appendChild(item);
    });
  });
</script>
</body>
</html>
